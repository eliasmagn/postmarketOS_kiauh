#!/sbin/openrc-run

description="Moonraker-Obico"
command="%ENV%/bin/python3"
command_args=""
command_user="%USER%"
directory="%OBICO_DIR%"
supervisor=supervise-daemon
respawn_delay=5
respawn_max=0

# EnvironmentFile=%ENV_FILE%

depend() {
    need net
}

start_pre() {
    if [ -f "%ENV_FILE%" ]; then
        set -a
        . "%ENV_FILE%"
        set +a
        command_args="${OBICO_ARGS}"
    else
        eerror "Environment file %ENV_FILE% not found"
        return 1
    fi
}
